<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <script type="text/javascript" th:src="@{https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js}"></script>
    <link th:href="@{https://cdn.bootcss.com/twitter-bootstrap/4.1.3/css/bootstrap.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/default.css}" rel="stylesheet"/>
    <link rel="icon" th:href="@{/images/favicon.ico}" type="image/x-icon"/>
    <script type="text/javascript" th:src="@{/plugin/template.js}"></script>
    <meta charset="UTF-8"/>
    <title>新建表</title>
</head>

<body>
<div class="contentDiv">

    <legend>
        <strong th:text="|新建表 - 数据库（${dataBaseName}）|"></strong>
        <a class="btn btn-primary" href="/" role="button">返回</a>
    </legend>

    <form th:action="@{/table/add}" method="post" class="form-horizontal">

        <div class="form-row">
            <div class="form-group col-md-2">
                <input type="text" class="form-control" name="tableName" autocomplete="off" placeholder="表名" required>
            </div>
        </div>

        <div class="fieldRowDiv">

        </div>

        <button type="button" class="btn btn-secondary" id="addFieldBtn">添加字段</button>
        <button type="submit" class="btn btn-primary">保存</button>

    </form>
</div>

<script>

    window.template();

    var count = 0;

    $(document).ready(function () {

        function addField(){
            var data = {num: ++count};
            var tpl = $("#fieldRowTemp").html();
            var tpl = template(tpl);
            var html = tpl(data);
            $(".fieldRowDiv").append(html);
        }

        $("#addFieldBtn").click(addField);

        addField();
    });

</script>

<script id="fieldRowTemp" type="text/html">
    <div class="form-row">
        <div class="form-group col-md-2">
            <input type="text" class="form-control" id="inputName" name="inputName<%=num%>" autocomplete="off" placeholder="字段名称<%=num%>" required>
        </div>
        <div class="form-group col-md-1">

            <select id="inputFieldType" name="inputFieldType<%=num%>" class="form-control" required>
                <option value="tinyint">tinyint</option>
                <option value="smallint">smallint</option>
                <option value="mediumint">mediumint</option>
                <option value="int">int</option>
                <option value="integer">integer</option>
                <option value="bigint">bigint</option>
                <option value="float">float</option>
                <option value="double">double</option>
                <option value="bit">bit</option>
                <option value="char">char</option>
                <option value="varchar" selected>varchar</option>
                <option value="tinytext">tinytext</option>
                <option value="text">text</option>
                <option value="mediumtext">mediumtext</option>
                <option value="longtext">longtext</option>
                <option value="date">date</option>
                <option value="datetime">datetime</option>
                <option value="timestamp">timestamp</option>
            </select>
        </div>
        <div class="form-group col-md-1">
            <input type="number" class="form-control" id="inputFieldLenght" name="inputFieldLenght<%=num%>" autocomplete="off"
                   value="0">
        </div>
        <div class="form-group col-md-3">
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <div class="input-group-text">
                        <input type="checkbox" aria-label="Checkbox for following text input">
                    </div>
                </div>
                <div class="input-group-append">
                    <span class="input-group-text bg-warning">Primary key</span>
                </div>
            </div>
        </div>
    </div>
</script>

</body>
</html>